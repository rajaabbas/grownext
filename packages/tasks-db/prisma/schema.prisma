generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
  output          = "../generated/client"
}

datasource db {
  provider  = "postgresql"
  url       = env("TASKS_DATABASE_URL")
  directUrl = env("TASKS_DATABASE_DIRECT_URL")
  schemas   = ["tasks"]
}

model Task {
  id             String     @id @default(cuid())
  organizationId String     @map("organization_id")
  tenantId       String     @map("tenant_id")
  title          String
  description    String?
  status         TaskStatus @default(OPEN)
  assignedToId   String?    @map("assigned_to_id") @db.Uuid
  createdById    String     @map("created_by_id") @db.Uuid
  dueDate        DateTime?  @map("due_date")
  completedAt    DateTime?  @map("completed_at")
  createdAt      DateTime   @default(now()) @map("created_at")
  updatedAt      DateTime   @updatedAt @map("updated_at")

  @@index([tenantId])
  @@index([organizationId])
  @@index([assignedToId])
  @@map("tasks")
  @@schema("tasks")
}

enum TaskStatus {
  OPEN
  IN_PROGRESS
  COMPLETED
  ARCHIVED

  @@schema("tasks")
}
