# Copy this file to `.env` and provide environment-specific secrets.
# Do NOT commit the populated `.env` file.

NODE_ENV=development
APP_VERSION=0.0.1
APP_BASE_URL=http://localhost:3200
PORTAL_LIGHTHOUSE_URL=http://localhost:3200
ADMIN_APP_URL=http://localhost:3500
NEXT_PUBLIC_API_BASE_URL=http://localhost:3100
IDENTITY_BASE_URL=http://localhost:3100
NEXT_PUBLIC_IDENTITY_BASE_URL=http://localhost:3100

# Supabase (replace with your project credentials)
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:55433
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_URL=http://127.0.0.1:55433
SUPABASE_ANON_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
E2E_SUPABASE_URL=http://127.0.0.1:55433
E2E_SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
E2E_BYPASS_RATE_LIMIT=false

# Database
DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:55432/postgres
TASKS_DATABASE_URL=postgresql://postgres:postgres@127.0.0.1:55436/tasks
# Optional direct URL for migrations (e.g. when using connection pooling providers)
TASKS_DATABASE_DIRECT_URL=

# Redis (used for queues / rate limiting backends)
REDIS_URL=redis://localhost:6379
TASKS_REDIS_HEALTH_URL=http://localhost:6380/healthz
TASKS_GRAFANA_DASHBOARD_URL=https://grafana.localhost/d/tasks
E2E_ADMIN_BASE_URL=http://localhost:3500

# API security / CORS
# Comma-separated list of additional origins allowed to call the API with credentials.
API_CORS_ORIGINS=
# Set to true when running behind a reverse proxy that forwards client IPs.
TRUST_PROXY=false

# Product clients
TASKS_CLIENT_ID=tasks

# Identity platform (update for production deployments)
IDENTITY_JWT_ALG=RS256
IDENTITY_JWT_KID=identity-rs256
IDENTITY_ISSUER=http://localhost:3100
IDENTITY_ACCESS_TOKEN_TTL_SECONDS=300
IDENTITY_REFRESH_TOKEN_TTL_SECONDS=2592000
IDENTITY_AUTHORIZATION_CODE_TTL_SECONDS=120
IDENTITY_COOKIE_DOMAIN=localhost
IDENTITY_JWKS_URL=http://localhost:3100/.well-known/jwks.json

# Symmetric fallback secret (used for HS256 environments / testing).
# Provide either IDENTITY_JWT_SECRET or a private/public key pair for RS256.
IDENTITY_JWT_SECRET=development-identity-secret-change-me

# RS256 key material (PEM-encoded). Replace with real keys in production.
IDENTITY_JWT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nreplace-with-real-key\n-----END PRIVATE KEY-----"
IDENTITY_JWT_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----\nreplace-with-real-public-key\n-----END PUBLIC KEY-----"

# SAML 2.0 service provider configuration (leave disabled until populated with a real keypair)
IDENTITY_SAML_ENABLED=false
IDENTITY_SAML_SP_ENTITY_ID=http://localhost:3100/saml/sp
IDENTITY_SAML_SP_SIGNING_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nreplace-with-real-key\n-----END PRIVATE KEY-----"
IDENTITY_SAML_SP_SIGNING_CERT="-----BEGIN CERTIFICATE-----\nreplace-with-real-cert\n-----END CERTIFICATE-----"
IDENTITY_SAML_NAMEID_FORMAT=urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress
