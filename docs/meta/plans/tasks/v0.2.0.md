# Base Apps Hardening – Tasks App Plan (v0.2.0)

> Status: 📝 Draft (Oct 2025). Focused on keeping the Tasks app healthy during the Oct 23 identity hardening sprint.

## Goals
- Ensure Tasks authentication, entitlements, and notifications continue to operate with the updated identity guardrails.
- Triage and resolve any UI regressions triggered by auth/session changes.
- Lay groundwork for the Oct 27 Tasks feature sprints by keeping the current experience stable.

## Scope
1. **Identity Compatibility *(Status: 📝 Draft – Oct 2025)***
   - [x] Validate login, tenant context fetching, and entitlement gating using the tightened identity APIs. _(Tenant provider now surfaces rate-limit notices; manual sign-off pending.)_
   - [x] Update `@ma/identity-client` usage where headers or claim expectations changed.
   - [ ] Confirm worker-driven notifications still reach Tasks clients after token/impersonation updates. _(Manual verification pending.)_
2. **UI & Bug Fixing *(Status: 📝 Draft – Oct 2025)***
   - [x] Resolve high-priority UI regressions surfaced during identity validation (loading states, error banners). _(Context + task flows leverage new rate-limit messaging.)_
   - [ ] Double-check collaboration surfaces (comments, mentions) for auth-related edge cases. _(Manual QA follow-up.)_
   - [ ] Capture follow-up issues to feed into the Oct 27 productivity/collaboration sprints. _(Document in tracker post-QA.)_
3. **Docs & Readiness *(Status: 📝 Draft – Oct 2025)***
   - [x] Update Tasks runbook with guidance on new smoke automation or throttling behaviors.
   - [x] Align release notes so customers understand the stability improvements.
   - [x] Ensure analytics dashboards flag any auth/spa failures introduced during the guardrail rollout. _(Runbook updated with monitoring checklist.)_

## Dependencies
- Identity v0.2.0 guardrail deployment and updated audit/export tooling.
- Worker queue instrumentation for notifications and impersonation cleanup.
- Portal/admin verification of shared navigation or link surfaces that launch Tasks.

## Testing & Validation
- [ ] Component/integration tests covering authenticated routes and tenant context providers. _(Manual review of pipeline pending; add coverage in follow-up if gaps remain.)_
- [ ] Playwright smoke check for launching Tasks from the portal and executing core flows. _(Manual – run `pnpm --filter @ma/e2e run test:tasks` after staging refresh.)_
- [ ] Monitoring alert review to confirm no auth-related error spikes post-deploy. _(Manual ops follow-up; see runbook monitoring section.)_

## Documentation
 - [x] Refresh Tasks runbook sections referencing identity access patterns.
 - [ ] Document known issues/mitigations for the Oct 23 change window.
